---
name: "relationship_calculation"
description: "relationship visibility"
priority: 1
condition: "true"
actions:
  - "relationship = 'sex_partner'"
---
name: "eligibility_for_testing_visibility"
description: "eligibility_for_testing visibility"
priority: 1
condition: "has_the_client_been_reached['yes'] != null"
actions:
  - "eligibility_for_testing_visibility = true"
---
name: "has_the_contact_client_been_tested_visibility"
description: "has_the_contact_client_been_tested visibility"
priority: 1
condition: "has_the_client_been_reached['yes'] != null && eligibility_for_testing['yes'] != null"
actions:
  - "has_the_contact_client_been_tested_visibility = true"
---
name: "test_results_visibility"
description: "test_results visibility"
priority: 1
condition: "has_the_client_been_reached['yes'] != null && eligibility_for_testing['yes'] != null && has_the_contact_client_been_tested['yes'] != null"
actions:
  - "test_results_visibility = true"
---
name: "place_where_test_was_conducted_visibility"
description: "place_where_test_was_conducted visibility"
priority: 1
condition: "test_results['positive'] != null && has_the_contact_client_been_tested['yes'] != null "
actions:
  - "place_where_test_was_conducted_visibility = true"
---
name: "toast_enroll_the_client_to_prep_visibility"
description: "toast_enroll_the_client_to_prep visibility"
priority: 2
condition: "relationship == 'sex_partner' && test_results['negative'] != null "
actions:
  - "toast_enroll_the_client_to_prep_visibility = true"
---
name: "enrolled_to_prep_visibility"
description: "enrolled_to_prep visibility"
priority: 2
condition: "relationship == 'sex_partner' && test_results['negative'] != null "
actions:
  - "enrolled_to_prep_visibility = true"
---
name: "reason_for_not_being_enrolled_to_prep_visibility"
description: "reason_for_not_being_enrolled_to_prep visibility"
priority: 3
condition: "test_results['negative'] != null && enrolled_to_prep['no'] != null "
actions:
  - "reason_for_not_being_enrolled_to_prep_visibility = true"
---
name: "enrolled_to_clinic_visibility"
description: "enrolled_to_clinic visibility"
priority: 1
condition: "test_results['positive'] != null && has_the_contact_client_been_tested['yes'] != null "
actions:
  - "enrolled_to_clinic_visibility =  true"
---
name: "ctc_number_visibility"
description: "ctc_number visibility"
priority: 1
condition: "test_results['positive'] != null && enrolled_to_clinic['yes'] != null"
actions:
  - "ctc_number_visibility =  true"
---
name: "hiv_facility_visit_date_calculation"
description: "hiv_facility_visit_date calculation"
priority: 1
condition: "true"
actions:
  - "def getDate(dateFormat) {
          import java.util.*;
          import java.text.SimpleDateFormat;
          return new SimpleDateFormat(dateFormat).format(Calendar.getInstance().getTime());
      }"
  - "hiv_facility_visit_date_calculation  = getDate('yyyy-MM-dd hh:mm:ss') "
---
name: "hiv_facility_visit_date_calculation"
description: "hiv_facility_visit_date calculation"
priority: 1
condition: "true"
actions:
  - "def getDate(dateFormat) {
          import java.util.*;
          import java.text.SimpleDateFormat;
          return new SimpleDateFormat(dateFormat).format(Calendar.getInstance().getTime());
      }"
  - "hiv_facility_visit_date_calculation  = getDate('yyyy-MM-dd hh:mm:ss') "